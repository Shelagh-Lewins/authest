(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){e.exports=a(254)},119:function(e,t,a){},246:function(e,t,a){},248:function(e,t,a){},252:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),i=a.n(s),o=(a(119),a(3)),l=a(4),c=a(6),u=a(5),m=a(7),d=a(261),p=a(260),h=a(9),E=a(21),f=a(109),v=a(48),b=function(e){return{type:"GET_ERRORS",payload:e}},g=function(){return{type:"CLEAR_ERRORS"}},y=a(32),w={},O=function(e){var t=[];return Object.keys(e).forEach(function(a){"string"===typeof e[a]?t.push(e[a]):e[a].map(function(e){t.push(e)})}),t.join(" ")};function C(e){var t=e.url,a=e.data,n=e.method,r=void 0===n?"GET":n,s=e.useAuth,i=void 0!==s&&s,o=e.headers,l=void 0===o?{}:o;return i&&(l.Authorization="Token ".concat(pe.getState().auth.user.token)),fetch(t,{headers:l,method:r,body:a}).then(function(e){if(e.ok){var a=e.headers.get("Content-Type")||"";return a.includes("application/json")?e.json().catch(function(e){return Promise.reject(new Error("Invalid JSON: "+e.message))}):a.includes("text/html")?e.text().then(function(e){return{page_type:"generic",html:e}}).catch(function(e){return Promise.reject(new Error("HTML error: "+e.message))}):void 0}return 404===e.status?Promise.reject(new Error("Page not found: "+t)):500===e.status?Promise.reject(new Error("Internal server error: "+t)):e.json().then(function(e){return Promise.reject(new Error(O(e)))})}).catch(function(e){return Promise.reject(new Error(e.message))})}var S=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};var N=function(e,t){return function(e){localStorage.setItem("jwtToken",e)}(e),{type:"SET_CURRENT_USER",payload:{token:e}}},j=function(e){return function(t){return t(g()),C({url:"/api/v1/rest-auth/logout/",method:"POST",useAuth:!1}).then(function(a){return e.push("/"),localStorage.removeItem("jwtToken"),t({type:"LOGOUT_USER_COMPLETE"})}).catch(function(e){return t(b({"logout user":"Unable to logout"}))})}},_=function(){return function(e){return C({url:"/api/v1/rest-auth/user/",method:"GET",useAuth:!0}).then(function(t){return e(function(e){return{type:"SET_USER_INFO",payload:e}}({username:t.username,email:t.email,slug:t.slug}))}).catch(function(t){return e(b({"get user info":"Unable to get user info"}))})}},k=function(e){return{type:"PASSWORD_NOT_CHANGED"}},I=function(e){return{type:"CHANGE_PASSWORD_COMPLETE"}},T=a(32),L={isAuthenticated:!1,forgotPasswordEmailSent:!1,resetPasswordComplete:!1,changePasswordComplete:!1,user:{}},D=a(12),P=a(77),R=[!1,!0],A=["Private","Public"],M=10,F=a(50),x="CREATE_ITEM_SUCCEEDED",U="DELETE_ITEM_SUCCEEDED",W=function(e){return function(t){return t({type:"CREATE_ITEM_REQUESTED"}),C({url:"/api/v1/content/items/",data:JSON.stringify(e),method:"POST",useAuth:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return t({type:"CREATE_ITEM_SUCCEEDED",payload:{item:e}})}).catch(function(e){return t(b({"create item":e.message}))})}};var q=function(e){var t=e.itemId,a=e.listId;return function(e){return C({url:"/api/v1/content/items/".concat(t,"/"),method:"DELETE"}).then(function(n){return e(function(e){var t=e.itemId,a=e.listId;return{type:"DELETE_ITEM_SUCCEEDED",payload:{itemId:t,listId:a}}}({itemId:t,listId:a}))}).catch(function(t){return e(b({"delete item":t.message}))})}};var G=a(32),H={things:{},isLoading:!1,error:null};var Y=function(e){var t=e.page.currentListId;return t&&e.lists.things[t]?e.lists.things[t].items.map(function(t){return e.items.things[t]}).sort(function(e,t){return e.order-t.order}):[]},V="RECEIVE_ENTITIES",J="FETCH_LISTS_STARTED",X="FETCH_LISTS_FAILED",B="FILTER_LISTS",z="CREATE_LIST_SUCCEEDED",Q="DELETE_LIST_SUCCEEDED",$="SET_LIST_IS_PUBLIC_SUCCEEDED",K="SET_CURRENT_LIST_ID",Z=new F.b.Entity("items"),ee=new F.b.Entity("lists",{items:[Z]});function te(){return function(e,t){return e({type:J}),C({url:"/api/v1/content/lists/",method:"GET"}).then(function(a){var n=Object(F.a)(a,[ee]);if(!t().page.currentListId){var r=a[0].id;e(se(r))}return e({type:V,payload:n})}).catch(function(t){return e({type:X}),console.log("error message ",t.message),e(b({"fetch lists":t.message}))})}}var ae=function(e){return function(t){return C({url:"/api/v1/content/lists/",data:JSON.stringify(e),method:"POST",useAuth:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return t({type:z,payload:{list:e}})}).catch(function(e){return t(b({"create list":e.message}))})}};var ne=function(e){return function(t){return C({url:"/api/v1/content/lists/".concat(e,"/"),method:"DELETE"}).then(function(a){return t(function(e){return{type:Q,payload:{id:e}}}(e))}).catch(function(e){return t(b({"delete list":e.message}))})}};var re=function(e){var t=e.id,a=e.is_public;return function(e){return C({url:"/api/v1/content/lists/".concat(t,"/"),headers:{"Content-Type":"application/json"},data:JSON.stringify({is_public:a}),method:"PATCH"}).then(function(t){return e(function(e){var t=e.id,a=e.is_public;return{type:$,payload:{id:t,is_public:a}}}(t))}).catch(function(t){return e(b({"set list is public":t.message}))})}};function se(e){return{type:K,payload:{id:e}}}var ie=a(32),oe={isLoading:!1,error:null,things:{}},le=Object(P.a)([function(e){return Object.keys(e.lists.things).map(function(t){return e.lists.things[t]})},function(e){return e.page.searchTerm}],function(e,t){return e.filter(function(e){return""===t?e:e.title.match(new RegExp(t,"i"))})}),ce=Object(P.a)([le],function(e){var t={};return R.forEach(function(a){t[a]=e.filter(function(e){return e.is_public===a})}),t});var ue=a(32),me={currentListId:null,searchTerm:""};var de=Object(E.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":var a={};return Object.keys(t.payload).forEach(function(e){"string"===typeof t.payload[e]?a[e]=[t.payload[e]]:a[e]=Object(v.a)(t.payload[e])}),y(a,{});case"CLEAR_ERRORS":return{};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return T({isAuthenticated:!S(t.payload.token),user:T.constant({token:t.payload.token})},e);case"SET_USER_INFO":return T({user:{username:t.payload.username,email:t.payload.email,slug:t.payload.slug}},e);case"LOGOUT_USER_COMPLETE":return T({isAuthenticated:!1,user:T.constant({})},e);case"FORGOT_PASSWORD_EMAIL_NOT_SENT":return T({forgotPasswordEmailSent:!1,resetPasswordComplete:!1},e);case"FORGOT_PASSWORD_EMAIL_SENT":return T({forgotPasswordEmailSent:!0,resetPasswordComplete:!1},e);case"RESET_PASSWORD_COMPLETE":return T({forgotPasswordEmailSent:!1,resetPasswordComplete:!0},e);case"PASSWORD_NOT_CHANGED":return T({changePasswordComplete:!1,errors:{}},e);case"CHANGE_PASSWORD_COMPLETE":return T({changePasswordComplete:!0},e);default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return ue({currentListId:t.payload.id},e);case Q:var a={};return t.payload.id===e.currentListId&&(a={currentListId:null}),ue({things:ue.omit([t.payload.id]),idUpdate:a},e);case B:return ue({searchTerm:t.payload.searchTerm},e);default:return e}},lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:var a=t.payload.entities;return a&&a.lists?ie({things:a.lists,isLoading:!1},e):e;case J:return ie({isLoading:!0},e);case X:return ie({isLoading:!1},e);case z:var n=t.payload.list;return ie({things:Object(D.a)({},n.id,n)},e);case Q:return ie({things:ie.omit([t.payload.id])},e);case $:var r=t.payload.id;return ie({things:Object(D.a)({},r,{is_public:t.payload.is_public})},e);case x:var s=t.payload.item;return ie.updateIn("things.".concat(s.list,".items"),function(e){return[].concat(e,s.id)},e);case U:return ie.updateIn("things.".concat(t.payload.listId,".items"),function(e){var a=e.findIndex(function(e){return e===t.payload.itemId}),n=[].concat(e);return n.splice(a,1),n},e);default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:var a=t.payload.entities;return a&&a.items?G({things:a.items,isLoading:!1},e):e;case x:var n=t.payload.item;return G({things:Object(D.a)({},n.id,n)},e);case U:return G({things:G.omit([t.payload.id])},e);default:return e}}});var pe=Object(E.e)(de,Object(E.d)(Object(E.a)(f.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),he=a(255),Ee=a(263),fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showDropdown:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"showDropdown",value:function(e){e.preventDefault(),this.setState(function(e){return{showDropdown:!e.showDropdown}})}},{key:"onLogout",value:function(e){e.preventDefault(),this.props.logoutUser(this.props.history)}},{key:"render",value:function(){var e=this,t=this.props.auth,a=t.isAuthenticated,n=t.user,s=r.a.createElement("ul",{className:"navbar-nav ml-auto"},n.username&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(he.a,{to:"/account",className:"nav-link"},n.username)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(he.a,{to:"/",className:"nav-link",onClick:this.onLogout.bind(this)},"Logout"))),i=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(he.a,{className:"nav-link",to:"/register"},"Register")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(he.a,{className:"nav-link",to:"/login"},"Login")));return r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light bg-light"},r.a.createElement(he.a,{className:"navbar-brand",to:"/"},"My Top Tens"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:function(t){e.showDropdown(t)}},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse ".concat(this.state.showDropdown?"show":""),id:"navbarSupportedContent"},a?s:i,r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search"))))}}]),t}(n.Component),ve=Object(h.b)(function(e){return{auth:e.auth}},{logoutUser:j})(Object(Ee.a)(fe)),be=a(2),ge=a(256),ye=a(257),we=a(258),Oe=a(259),Ce=a(262),Se=a(112),Ne=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={isValidated:!1},e.customMessages={},e.getCustomMessage=function(t){if(t.validity.customError)return t.validationMessage;if(t.validity.typeMismatch)return e.customMessages["".concat(t.type,"Mismatch")];for(var a in e.customMessages)if(t.validity[a])return e.customMessages[a]},e.validate=function(){var t=i.a.findDOMNode(Object(be.a)(Object(be.a)(e))),a=t.length;if(!1===t.checkValidity()){for(var n=0;n<a;n++){var r=t[n],s=r.parentNode.querySelector(".invalid-feedback");if(s&&"button"!==r.nodeName.toLowerCase())if(r.validity.valid)s.textContent="";else{var o=e.getCustomMessage(r)||r.validationMessage;s.textContent=o}}return!1}for(var l=0;l<a;l++){var c=t[l],u=c.parentNode.querySelector(".invalid-feedback");u&&"button"!==c.nodeName.toLowerCase()&&(u.textContent="")}return!0},e.submitHandler=function(t){t.preventDefault(),e.validate()&&e.props.onSubmit(t),e.setState({isValidated:!0})},e.validate=e.validate.bind(Object(be.a)(Object(be.a)(e))),e.checkFieldMatch=e.checkFieldMatch.bind(Object(be.a)(Object(be.a)(e))),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.inputsmustmatch){var t=i.a.findDOMNode(this),a=this.props.inputsmustmatch.input1,n=this.props.inputsmustmatch.input2,r=t.querySelector("#".concat(a)),s=t.querySelector("#".concat(n));r instanceof HTMLElement&&s instanceof HTMLElement&&(r.oninput=function(t){return e.checkFieldMatch(a,n,t)},s.oninput=function(t){return e.checkFieldMatch(a,n,t)})}}},{key:"checkFieldMatch",value:function(e,t,a){var n=i.a.findDOMNode(this);if(n instanceof HTMLElement){var r=n.querySelector("#".concat(e)),s=n.querySelector("#".concat(t));r instanceof HTMLElement&&s instanceof HTMLElement&&(r.value===s.value?s.setCustomValidity(""):s.setCustomValidity(this.props.inputsmustmatch.message))}}},{key:"render",value:function(){var e=Object(Se.a)({},this.props),t=[];return e.className&&(t=Object(v.a)(e.className),delete e.className),this.state.isValidated&&t.push("was-validated"),r.a.createElement("form",Object.assign({},e,{className:t,noValidate:!0,onSubmit:this.submitHandler}),this.props.children)}}]),t}(n.Component),je=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={username:"",email:"",password:"",password_confirm:""},e.handleInputChange=e.handleInputChange.bind(Object(be.a)(Object(be.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(be.a)(Object(be.a)(e))),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,email:this.state.email,password1:this.state.password,password2:this.state.password_confirm};this.props.registerUser(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(ge.a,null,r.a.createElement("h2",null,"Create an account"),r.a.createElement(Ne,{onSubmit:this.handleSubmit,inputsmustmatch:{input1:"password",input2:"password_confirm",message:"Passwords must match"}},r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"email"},"Email address"),r.a.createElement(Ce.a,{type:"email",name:"email",required:!0,id:"email",onChange:this.handleInputChange,value:this.state.email,placeholder:"Enter your email address"}),r.a.createElement("div",{className:"invalid-feedback"}),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("p",null,"You will use your email address to login. It will not be seen by other users."))))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"username"},"Username"),r.a.createElement(Ce.a,{type:"text",name:"username",id:"username",required:!0,onChange:this.handleInputChange,value:this.state.username,placeholder:"Enter your username"}),r.a.createElement("div",{className:"invalid-feedback"}),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("p",null,"Your username may be seen by other users, for example in comments."))))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"password"},"Password"),r.a.createElement(Ce.a,{type:"password",name:"password",required:!0,minLength:8,pattern:".*[^0-9].*",id:"password",value:this.state.password,placeholder:"Enter your password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"})))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"password_confirm"},"Confirm your password"),r.a.createElement(Ce.a,{type:"password",name:"password_confirm",id:"password_confirm",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.password_confirm,placeholder:"Confirm your password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"}),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("ul",null,r.a.createElement("li",null,"Your password can't be too similar to your other personal information."),r.a.createElement("li",null,"Your password must contain at least 8 characters."),r.a.createElement("li",null,"Your password can't be a commonly used password."),r.a.createElement("li",null,"Your password can't be entirely numbers.")))))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Create account"))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,this.props.errors.registration&&r.a.createElement("div",{className:"invalid-feedback ",style:{display:"block"}},this.props.errors.registration)))))}}]),t}(n.Component),_e=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){a(g());var n=new FormData;for(var r in e)n.append(r,e[r]);return C({url:"/api/v1/rest-auth/registration/",data:n,method:"POST"}).then(function(e){return t.push("/welcome"),e}).catch(function(e){return a(b({registration:e.message}))})}}})(Object(Ee.a)(je)),ke=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={errors:{}},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(ge.a,null,r.a.createElement("h2",null,"Welcome to My Top Tens"),r.a.createElement("p",null,"Your account has been created. Click the link below to login."),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement(he.a,{to:"/login",className:"nav-link"},"Login"))))}}]),t}(n.Component),Ie=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}})(ke),Te=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={email:"",password:""},e.handleInputChange=e.handleInputChange.bind(Object(be.a)(Object(be.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(be.a)(Object(be.a)(e))),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"handleInputChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.loginUser(t,this.props.history)}},{key:"render",value:function(){return r.a.createElement(ge.a,null,r.a.createElement("h2",null,"Login"),r.a.createElement(Ne,{onSubmit:this.handleSubmit},r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"email"},"Email address"),r.a.createElement(Ce.a,{type:"email",name:"email",id:"email",required:!0,onChange:this.handleInputChange,value:this.state.email,placeholder:"Email address or username"}),r.a.createElement("div",{className:"invalid-feedback"})))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"password"},"Password"),r.a.createElement(Ce.a,{type:"password",name:"password",required:!0,id:"password",value:this.state.password,placeholder:"Password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"})))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,this.props.errors.authentication&&r.a.createElement("div",{className:"invalid-feedback ",style:{display:"block"}},this.props.errors.authentication)))),r.a.createElement(he.a,{className:"nav-link",to:"/forgotpassword"},"Forgot password?"))}}]),t}(n.Component),Le=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e,t){return function(a){a(g());var n=new FormData;for(var r in e)n.append(r,e[r]);return C({url:"/api/v1/rest-auth/login/",data:n,method:"POST",useAuth:!1}).then(function(e){return t.push("/"),a(N(e.key))}).then(function(){return pe.dispatch(_())}).catch(function(e){return a(b({authentication:"Unable to log in with the provided credentials, please try again."}))})}}})(Te),De=function(e){var t="select-".concat(e.list.id),a=e.list.is_public?"Public":"Private";return r.a.createElement(we.a,{sm:"3",md:"4",className:"list-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("div",null,e.list.title)),r.a.createElement("div",{className:"list-body"},e.list.description),r.a.createElement("div",{className:"list-status"},r.a.createElement("label",null,"Set list private/public status",r.a.createElement("select",{className:"form-control",value:a,onChange:function(t){var a="Public"===t.target.value;e.onIsPublicChange({id:e.list.id,is_public:a})},id:t},A.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.onDeleteList(e.list.id)}},"Delete"))},Pe=function(e){var t=R.indexOf("true"===e.is_public),a=A[t];return r.a.createElement(ge.a,{className:"lists-list"},r.a.createElement(ye.a,null,r.a.createElement("h3",{className:"lists-list-title"},r.a.createElement("strong",null,a))),r.a.createElement(ye.a,null,e.lists.map(function(t){return r.a.createElement(De,{key:t.id,list:t,onIsPublicChange:e.onIsPublicChange,onDeleteList:e.onDeleteList})})))},Re=(a(246),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSearch=function(e){a.props.onSearch(e.target.value)},a.onTitleChange=function(e){a.setState({title:e.target.value})},a.onDescriptionChange=function(e){a.setState({description:e.target.value})},a.onCreateList=function(e){e.preventDefault(),a.props.onCreateList({title:a.state.title,description:a.state.description}),a.resetForm()},a.onDeleteList=function(e){a.props.onDeleteList(e)},a.toggleForm=function(){a.setState({showNewCardForm:!a.state.showNewCardForm})},a.state={showNewCardForm:!1,title:"",description:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"resetForm",value:function(){this.setState({showNewCardForm:!1,title:"",description:""})}},{key:"renderListsList",value:function(){var e=this.props,t=e.lists,a=e.onIsPublicChange,n=e.onDeleteList;return Object.keys(t).map(function(e){var s=t[e];return r.a.createElement(Pe,{lists:s,onIsPublicChange:a,onDeleteList:n,is_public:e,key:e})})}},{key:"render",value:function(){return this.props.isLoading?r.a.createElement("div",{className:"lists-loading"},"Loading..."):r.a.createElement("div",{className:"lists-list"},r.a.createElement(ge.a,null,r.a.createElement("div",{className:"lists-list-header"},r.a.createElement("input",{className:"form-control",onChange:this.onSearch,type:"text",placeholder:"Search..."}),r.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleForm},"+ New list"))),this.state.showNewCardForm&&r.a.createElement("form",{className:"lists-list-form",onSubmit:this.onCreateList},r.a.createElement("input",{className:"full-width-input",onChange:this.onTitleChange,value:this.state.title,type:"text",placeholder:"title"}),r.a.createElement("input",{className:"full-width-input",onChange:this.onDescriptionChange,value:this.state.description,type:"text",placeholder:"description"}),r.a.createElement("button",{className:"button",type:"submit"},"Save")),r.a.createElement("div",{className:"lists"},this.renderListsList()))}}]),t}(n.Component)),Ae=function(e){return r.a.createElement(we.a,{sm:"3",md:"4",className:"item-container"},r.a.createElement("div",{className:"item-header"},r.a.createElement("div",null,"".concat(e.item.order,": ").concat(e.item.title))),r.a.createElement("div",{className:"item-body"},r.a.createElement("div",null,e.item.description)),r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.onDeleteItem({itemId:e.item.id,listId:e.list})}},"Delete"))},Me=function(e){return r.a.createElement(ge.a,{className:"items-list"},r.a.createElement(ye.a,null,r.a.createElement("h3",{className:"items-list-title"},r.a.createElement("strong",null,"Items for list: "))),r.a.createElement(ye.a,null,e.items.map(function(t){return r.a.createElement(Ae,{key:t.id,item:t,onDeleteItem:e.onDeleteItem,list:e.list})})))},Fe=(a(248),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onTitleChange=function(e){a.setState({title:e.target.value})},a.onDescriptionChange=function(e){a.setState({description:e.target.value})},a.onCreateItem=function(e){e.preventDefault();var t,n=a.props.items.map(function(e){return parseInt(e.order)});n.sort(function(e,t){return e-t});for(var r=1;r<=M;r++)if(-1===n.indexOf(r)){t=r;break}t&&(a.props.onCreateItem({title:a.state.title,description:a.state.description,list:a.props.currentListId,order:t}),a.resetForm())},a.toggleForm=function(){a.setState({showNewItemForm:!a.state.showNewItemForm})},a.state={showNewItemForm:!1,title:"",description:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"resetForm",value:function(){this.setState({showNewCardForm:!1,title:"",description:""})}},{key:"renderItemsList",value:function(){return r.a.createElement(Me,{items:this.props.items,onDeleteItem:this.props.onDeleteItem,list:this.props.currentListId})}},{key:"render",value:function(){return r.a.createElement("div",{className:"items-list"},r.a.createElement(ge.a,{className:"items-list-header"},r.a.createElement(ye.a,null,r.a.createElement("button",{className:"button button-default",onClick:this.toggleForm},"+ New item")),this.state.showNewItemForm&&r.a.createElement("form",{className:"items-list-form",onSubmit:this.onCreateItem},r.a.createElement("input",{className:"full-width-input",onChange:this.onTitleChange,value:this.state.title,type:"text",placeholder:"title"}),r.a.createElement("input",{className:"full-width-input",onChange:this.onDescriptionChange,value:this.state.description,type:"text",placeholder:"description"}),r.a.createElement("button",{className:"button",type:"submit"},"Save"))),this.renderItemsList())}}]),t}(n.Component)),xe=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.lists).map(function(t){return e.props.lists[t].map(function(e){var a=R.indexOf("true"===t);return r.a.createElement("option",{key:e.id,value:e.id},e.title," (",A[a],")")})});return r.a.createElement("div",{className:"header"},this.props.currentListId&&r.a.createElement("div",{className:"list-select"},r.a.createElement("label",null,"List:",r.a.createElement("select",{onChange:this.props.onCurrentListChange,className:"list-menu form-control",value:this.props.currentListId},t))))}}]),t}(n.Component);function Ue(e){var t=e.message,a=e.type,n=e.onClick;return r.a.createElement("div",{className:"flash-error ".concat(a)},r.a.createElement("span",null,t),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:n},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))}var We=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onCurrentListChange=function(e){a.props.dispatch(se(e.target.value))},a.onSearch=function(e){a.props.dispatch(function(e){return{type:B,payload:{searchTerm:e}}}(e))},a.onCreateList=function(e){var t=e.title,n=e.description;console.log("onCreateList firing"),a.props.dispatch(ae({title:t,description:n}))},a.onIsPublicChange=function(e){var t=e.id,n=e.is_public;a.props.dispatch(re({id:t,is_public:n}))},a.onDeleteList=function(e){a.props.dispatch(ne(e))},a.onCreateItem=function(e){a.props.dispatch(W(e))},a.onDeleteItem=function(e){a.props.dispatch(q(e))},a.onCloseFlashMessage=function(){a.props.dispatch(g())},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(te())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ge.a,null,r.a.createElement(ye.a,null,r.a.createElement(we.a,null,!S(this.props.errors)&&r.a.createElement(Ue,{message:O(this.props.errors),type:"error",onClick:this.onCloseFlashMessage})))),r.a.createElement(ge.a,null,r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement(xe,{lists:this.props.lists,onCurrentListChange:this.onCurrentListChange,currentListId:this.props.currentListId})))),r.a.createElement(Re,{lists:this.props.lists,onSearch:this.onSearch,onCreateList:this.onCreateList,onIsPublicChange:this.onIsPublicChange,onDeleteList:this.onDeleteList,isLoading:this.props.isLoading}),r.a.createElement(Fe,{items:this.props.items,onCreateItem:this.onCreateItem,currentListId:this.props.currentListId,onDeleteItem:this.onDeleteItem}))}}]),t}(n.Component),qe=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors,isLoading:e.lists.isLoading,lists:ce(e),items:Y(e),currentListId:e.page.currentListId}})(We),Ge=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={errors:{}},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(ge.a,null,r.a.createElement("h2",null,"Account management"),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement(he.a,{to:"/changepassword",className:"nav-link"},"Change password"))))}}]),t}(n.Component),He=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}})(Ge),Ye=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={email:"",errors:{}},e.handleInputChange=e.handleInputChange.bind(Object(be.a)(Object(be.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(be.a)(Object(be.a)(e))),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/"),this.props.forgotPasswordEmailNotSent()}},{key:"handleInputChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email};this.props.forgotPassword(t)}},{key:"render",value:function(){return r.a.createElement(ge.a,null,r.a.createElement("h2",null,"Forgot your password?"),r.a.createElement("p",null,"Enter your email address. A reset password link will be emailed to you."),r.a.createElement(Ne,{onSubmit:this.handleSubmit},r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"email"},"Email address"),r.a.createElement(Ce.a,{type:"email",name:"email",required:!0,id:"email",onChange:this.handleInputChange,value:this.state.email,placeholder:"Enter your email address"}),r.a.createElement("div",{className:"invalid-feedback"})))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Send me a password reset email"))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,this.props.errors.email&&r.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},this.props.errors.email)))),this.props.auth.forgotPasswordEmailSent&&r.a.createElement("div",{className:"valid-feedback"},"An email has been sent to ",this.state.email,". If you don't see it within a few minutes, please check your junk mail folder."))}}]),t}(n.Component),Ve=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{forgotPassword:function(e){return function(t){t(g());var a=new FormData;for(var n in e)a.append(n,e[n]);return C({url:"/api/v1/rest-auth/password/reset/",data:a,method:"POST",useAuth:!1}).then(function(e){return t({type:"FORGOT_PASSWORD_EMAIL_SENT"})}).catch(function(e){return t(b(e.response.data))})}},forgotPasswordEmailNotSent:function(e){return{type:"FORGOT_PASSWORD_EMAIL_NOT_SENT"}}})(Ye),Je=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={old_password:"",new_password:"",new_password_confirm:""},e.handleInputChange=e.handleInputChange.bind(Object(be.a)(Object(be.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(be.a)(Object(be.a)(e))),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("submit changePassword");var t={old_password:this.state.old_password,new_password1:this.state.new_password,new_password2:this.state.new_password_confirm};this.props.changePassword(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(ge.a,null,r.a.createElement("h2",null,"Change your password"),r.a.createElement(Ne,{onSubmit:this.handleSubmit,inputsmustmatch:{input1:"new_password",input2:"new_password_confirm",message:"New passwords must match"}},r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"old_password"},"Old password"),r.a.createElement(Ce.a,{type:"password",name:"old_password",id:"old_password",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.old_password,placeholder:"Enter your old password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"})))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"new_password"},"New password"),r.a.createElement(Ce.a,{type:"password",name:"new_password",id:"new_password",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.new_password,placeholder:"Enter your password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"})))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement(Oe.a,{for:"new_password_confirm"},"Confirm your new password"),r.a.createElement(Ce.a,{type:"password",name:"new_password_confirm",id:"new_password_confirm",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.new_password_confirm,placeholder:"Confirm your password",onChange:this.handleInputChange}),r.a.createElement("div",{className:"invalid-feedback"}),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("ul",null,r.a.createElement("li",null,"Your password can't be too similar to your other personal information."),r.a.createElement("li",null,"Your password must contain at least 8 characters."),r.a.createElement("li",null,"Your password can't be a commonly used password."),r.a.createElement("li",null,"Your password can't be entirely numbers.")))))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Change password now"))),r.a.createElement(ye.a,null,r.a.createElement(we.a,null,this.props.errors.changePassword&&r.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},this.props.errors.changePassword)))),this.props.auth.changePasswordComplete&&r.a.createElement("div",{className:"valid-feedback"},"Your new password has been saved"))}}]),t}(n.Component),Xe=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{changePassword:function(e){return function(t){t(g()),t(k());var a=new FormData;for(var n in e)a.append(n,e[n]);return C({url:"/api/v1/rest-auth/password/change/",data:a,method:"POST",useAuth:!0}).then(function(e){return t(I()),e}).catch(function(e){return t(b({changePassword:e.message}))})}},passwordNotChanged:k})(Object(Ee.a)(Je));a(250),a(252);if(localStorage.getItem("jwtToken")){pe.dispatch(N(localStorage.jwtToken));var Be=Date.now()/1e3;localStorage.jwtToken.exp<Be&&pe.dispatch(j())}var ze=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:pe},r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(ve,null),r.a.createElement(p.a,{exact:!0,path:"/",component:qe}),r.a.createElement("div",{className:"container"},r.a.createElement(p.a,{exact:!0,path:"/register",component:_e}),r.a.createElement(p.a,{exact:!0,path:"/welcome",component:Ie}),r.a.createElement(p.a,{exact:!0,path:"/login",component:Le}),r.a.createElement(p.a,{exact:!0,path:"/forgotpassword",component:Ve}),r.a.createElement(p.a,{exact:!0,path:"/account",component:He}),r.a.createElement(p.a,{exact:!0,path:"/changepassword",component:Xe})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()});i.a.render(r.a.createElement(ze,null),document.getElementById("root"))}},[[114,2,1]]]);
//# sourceMappingURL=main.2e07dd93.chunk.js.map